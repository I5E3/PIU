<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/assets/css/mypage_style.css">
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css"/>



        <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
        <script src="http://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
        <!-- datepicker 한국어로 -->
        <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/i18n/datepicker-ko.js"></script>
        <script>                

            $(document).ready(function() {
    
                //datepicker 한국어로 사용하기 위한 언어설정
                $.datepicker.setDefaults($.datepicker.regional['ko']);     
            
                // Datepicker            
                $(".datepicker").datepicker({
                    showButtonPanel: true,
                    dateFormat: "yy-mm-dd",
                    onClose : function ( selectedDate ) {
                    
                        var eleId = $(this).attr("id");
                        var optionName = "";
    
                        if(eleId.indexOf("StartDate") > 0) {
                            eleId = eleId.replace("StartDate", "EndDate");
                            optionName = "minDate";
                        } else {
                            eleId = eleId.replace("EndDate", "StartDate");
                            optionName = "maxDate";
                        }
    
                        $("#"+eleId).datepicker( "option", optionName, selectedDate );        
                        $(".searchDate").find(".chkbox2").removeClass("on"); 
                    }
                }); 
    
                //시작일.
                /*$('#searchStartDate').datepicker("option","onClose", function( selectedDate ) {    
                    // 시작일 datepicker가 닫힐때
                    // 종료일의 선택할수있는 최소 날짜(minDate)를 선택한 시작일로 지정
                    $("#searchEndDate").datepicker( "option", "minDate", selectedDate );
                    $(".searchDate").find(".chkbox2").removeClass("on");
                });
                */
    
                //종료일.
                /*$('#searchEndDate').datepicker("option","onClose", function( selectedDate ) {    
                    // 종료일 datepicker가 닫힐때
                    // 시작일의 선택할수있는 최대 날짜(maxDate)를 선택한 종료일로 지정 
                    $("#searchStartDate").datepicker( "option", "maxDate", selectedDate );
                    $(".searchDate").find(".chkbox2").removeClass("on");
                });
                */
    
                $(".dateclick").dateclick();    // DateClick
                $(".searchDate").schDate();        // searchDate
                
            });
    
            // Search Date
            jQuery.fn.schDate = function(){
                var $obj = $(this);
                var $chk = $obj.find("input[type=radio]");
                $chk.click(function(){                
                    $('input:not(:checked)').parent(".chkbox2").removeClass("on");
                    $('input:checked').parent(".chkbox2").addClass("on");                    
                });
            };
    
            // DateClick
            jQuery.fn.dateclick = function(){
                var $obj = $(this);
                $obj.click(function(){
                    $(this).parent().find("input").focus();
                });
            }    
    
            
            function setSearchDate(start){
    
                var num = start.substring(0,1);
                var str = start.substring(1,2);
    
                var today = new Date();
    
                //var year = today.getFullYear();
                //var month = today.getMonth() + 1;
                //var day = today.getDate();
                
                var endDate = $.datepicker.formatDate('yy-mm-dd', today);
                $('#searchEndDate').val(endDate);
                
                if(str == 'd'){
                    today.setDate(today.getDate() - num);
                }else if (str == 'w'){
                    today.setDate(today.getDate() - (num*7));
                }else if (str == 'm'){
                    today.setMonth(today.getMonth() - num);
                    today.setDate(today.getDate() + 1);
                }
    
                var startDate = $.datepicker.formatDate('yy-mm-dd', today);
                $('#searchStartDate').val(startDate);
                        
                // 종료일은 시작일 이전 날짜 선택하지 못하도록 비활성화
                $("#searchEndDate").datepicker( "option", "minDate", startDate );
                
                // 시작일은 종료일 이후 날짜 선택하지 못하도록 비활성화
                $("#searchStartDate").datepicker( "option", "maxDate", endDate );
    
            }
    
                
            </script>
        

    <title>주문 내역</title>
</head>
<body>
    <div id="my_modal">
        <div class="image">
        <img src="../../static/images/deliver.png">
        </div>
        <div class="modal-title">배송 안내</div>
        <p>1. 상품 준비 중 단계까지 주문 수정(주문 취소, 배송지 변경)이 가능합니다.</p><br>
        <p>2. 출고 준비 중 단계부터 주문 수정이 불가능하며, 단순 변심으로 인한 환불 요청 시 왕복 배송비가 부과됩니다.</p><br>
        <p>3. 출고 준비 중 단계에서 배송 중 단계로 이동은 최대 영업일 1일이 소요됩니다.</p><br>
        <p>4. 배송 중 단계부터 송장 조회 및 배송추적이 가능합니다.</p><br>
        <p>5. 교환/반품을 희망하실 경우, 배송 완료 단계에서 진행이 가능합니다.</p><br>
        <p>6. 여러 업체에서 준비물이 배송될 경우, 여러 번의 왕복배송비가 발생할 수 있습니다.</p><br>
        
        <a class="modal_close_btn">닫기</a>
    </div>    
    <div class="mypage-outline">
        <div class="mypage-wrap">
            <aside class="left-side">
                <section class="my-profile">  
                    <div class="user-letter">                        
                        <div class="my-profile-nickname">
                            <p><strong>김아무개</strong></p>
                        </div>
                        <div class="email">                        
                            <div class="my-profile-email">
                                <p><strong>이메일@naver.com</strong></p>
                            </div>
                        </div>
                    </div>                   
                    <div class="my-profile-image">
                        <img src="../../static/images/1361876.png">
                    </div>                    
                </section>
                <hr class="line">
                <section class="user-info-modify">
                    <a class="info-modify" href="userInfoChange.html">
                    회원정보 수정</a>
                </section>
                <hr class="line">
                <a class="point-check" href="mypoint.html">
                    <section class="user-point">
                        <div class="my-point">
                            내 포인트
                        </div>
                        <div class="point-number">
                            0P
                        </div>
                    </section></a>
                    <a class="my-reply" href="myReview.html">
                        <section class="reply">
                            내 후기
                        </section></a>
                    <a class="my-QnA" href="myQnA.html">
                        <section class="QnA">
                            내 문의
                        </section></a>
                <hr class="line">                
                <section class="user-store">
                    내 상품
                    <a class="my-product" href="myorderlist.html">
                        <section class="buy-product">
                            주문 내역
                        </section>
                    </a>
                </section>
            </aside>
            <div class="myorder-right">                
              <section class="order-deliver">
                <div class="order-main-title">주문 내역</div>
                  <div class="order-modal">
                      <div class="order-title">                 
                        <div class="title">주문 및 배송</div>&nbsp;&nbsp;
                        <div class="count" style="vertical-align: text-bottom;">총 1개</div>
                      </div>
                      <div class="modal-window" onclick="document.getElementById('popup_open_btn').click();">
                        배송 안내
                      </div>                      
                  </div>
                  <div class="order-search">                 
                    <div class="order-date-search">주문내역 조회하기</div>                        
                  </div>

                  <div id="my_calen">
                    <div class="main-cal">
                        <form class="calen" action="#">
                            
                        <!-- search -->
                        <table class="searchBox">
                            <caption>조회</caption>
                            <colgroup>
                                <col width="123px">
                                <col width="*">
                            </colgroup>
                            <tbody>
                                <tr>
                                    <th>조회기간</th>
                                    <td>
                                        <ul class="searchDate" style="margin: 0; padding: 0; margin-bottom: 10px;">
                                            <li>
                                                <span class="chkbox2">
                                                    <input type="radio" name="dateType" id="dateType1" onclick="setSearchDate('0d')"/>
                                                    <label for="dateType1">당일</label>
                                                </span>
                                            </li>                                
                                            <li>
                                                <span class="chkbox2">
                                                    <input type="radio" name="dateType" id="dateType3" onclick="setSearchDate('1w')"/>
                                                    <label for="dateType3">1주</label>
                                                </span>
                                            </li>
                                            <li>
                                                <span class="chkbox2">
                                                    <input type="radio" name="dateType" id="dateType4" onclick="setSearchDate('2w')"/>
                                                    <label for="dateType4">2주</label>
                                                </span>
                                            </li>
                                            <li>
                                                <span class="chkbox2">
                                                    <input type="radio" name="dateType" id="dateType5" onclick="setSearchDate('1m')"/>
                                                    <label for="dateType5">1개월</label>
                                                </span>
                                            </li>
                                            <li>
                                                <span class="chkbox2">
                                                    <input type="radio" name="dateType" id="dateType6" onclick="setSearchDate('3m')"/>
                                                    <label for="dateType6">3개월</label>
                                                </span>
                                            </li>                                                         
                                        </ul>
                                        
                                        <div class="clearfix">
                                            <!-- 시작일 -->
                                            <span class="dset">
                                                <input type="text" class="datepicker inpType" name="searchStartDate" id="searchStartDate" >
                                                <a href="#none" class="btncalendar dateclick">달력</a>
                                            </span>
                                            <span class="demi">~</span>
                                            <!-- 종료일 -->
                                            <span class="dset">
                                                <input type="text" class="datepicker inpType" name="searchEndDate" id="searchEndDate" >
                                                <a href="#none" class="btncalendar dateclick">달력</a>
                                            </span>
                                        </div>    
                                    </td>
                                    
                                </tr>
                
                            <tbody>                    
                        </table>   
                        
                        <div class="search-date">   
                            <button type="submit" class="search-ok" id="search-ok">조회하기</button>
                        </div>
                        </form>
                    </div>                 
                </div>

                  <div class="order-date">                    
                    <section class="my-order-history">
                        <div class="my-order-list">                 
                            <div class="order-items">내 주문내역</div>                        
                        </div>
                        <div class="date-detail">
                            <div>
                                2022. 06. 07
                            </div>
                            <div>
                                <a href="#">자세히 보기 &gt;</a>
                            </div>
                        </div>
                        <section class="my-item">
                            <div class="buy-success">
                                결제 성공
                            </div>
                            <div class="buy-item-content">
                                <div class="item-image">
                                    <img src="../../static/images/item.png">
                                </div>
                                <div class="sapcebar-thr"></div>
                                <div class="item-explain">
                                    <div class="explain-name">
                                        뜨개 도안 · 한 여름에 어울리는 스와니탑 도안
                                    </div>
                                    <div class="explain-count">
                                        수량 1개
                                    </div>
                                </div>
                            </div>
                        </section>  
                        <section class="my-item">
                            <div class="buy-success">
                                결제 성공
                            </div>
                            <div class="buy-item-content">
                                <div class="item-image">
                                    <img src="../../static/images/item.png">
                                </div>
                                <div class="sapcebar-thr"></div>
                                <div class="item-explain">
                                    <div class="explain-name">
                                        쫀득 말랑 귀여운 마쉬멜로우 백 DIY 키트
                                    </div>
                                    <div class="explain-count">
                                        수량 1개
                                    </div>
                                </div>
                            </div>
                        </section>                   
                    </section>
                  </div>
            <button id="popup_open_btn">팝업창 띄어 줘염</button>
            </div>
        </div>
    </div>

    <script>
        function modal(id) {
            var zIndex = 9999;
            var modal = document.getElementById(id);

            // 모달 div 뒤에 희끄무레한 레이어
            var bg = document.createElement('div');
            bg.setStyle({
                position: 'fixed',
                zIndex: zIndex,
                left: '0px',
                top: '0px',
                width: '100%',
                height: '100%',
                overflow: 'auto',
                // 레이어 색갈은 여기서 바꾸면 됨
                backgroundColor: 'rgba(0,0,0,0.4)'
            });
            document.body.append(bg);

            // 닫기 버튼 처리, 시꺼먼 레이어와 모달 div 지우기
            modal.querySelector('.modal_close_btn').addEventListener('click', function() {
                bg.remove();
                modal.style.display = 'none';
            });

            modal.setStyle({
                position: 'fixed',
                display: 'block',
                boxShadow: '0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)',

                // 시꺼먼 레이어 보다 한칸 위에 보이기
                zIndex: zIndex + 1,

                // div center 정렬
                top: '50%',
                left: '50%',
                transform: 'translate(-50%, -50%)',
                msTransform: 'translate(-50%, -50%)',
                webkitTransform: 'translate(-50%, -50%)'
            });
        }

        // Element 에 style 한번에 오브젝트로 설정하는 함수 추가
        Element.prototype.setStyle = function(styles) {
            for (var k in styles) this.style[k] = styles[k];
            return this;
        };

        document.getElementById('popup_open_btn').addEventListener('click', function() {
            // 모달창 띄우기
            modal('my_modal');
        });
    </script>
</body>
</html>